<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="http://www.jianguook.com/static/js/jquery-1.7.2.min.js"></script>
</head>
<body>
    
</body>
<script>
   
//æ–¹æ³•ä¸€ï¼šä½¿ç”¨awaitå¿…é¡»å’Œasyncä¸€èµ·ä½¿ç”¨ï¼Œå¹¶ä¸”æ”¾åœ¨å«æœ‰asyncä¿®é¥°çš„å‡½æ•°é‡Œï¼Œå¦åˆ™æŠ¥ä¸‹é¢é”™è¯¯

    // Uncaught SyntaxError: await is only valid in async functions and the top level bodies of modules
        // è¿™ä¸ªé”™è¯¯çš„æ„æ€æ˜¯awaitåªèƒ½æ”¾åˆ°asyncå‡½æ•°å†…éƒ¨ï¼Œè¨€ä¸‹ä¹‹æ„ï¼š
        //awaitå¿…é¡»æ”¾åˆ°å‡½æ•°é‡Œ
        // å‡½æ•°å¿…é¡»æœ‰asyncä¿®é¥°ç¬¦
        // asyncå¼‚æ­¥
    const fetchFirst = async()=>{
        let url = 'https://api.github.com/repos/javascript-tutorial/en.javascript.info/commits';
        let response = await fetch(url);
        let whatthings = await response.json();
        console.log(whatthings,'whatthings')
    }
    fetchFirst();
   
//æ–¹æ³•äºŒ ä»…ä½¿ç”¨promiseè¯­æ³•ï¼Œä¸ä½¿ç”¨await
fetch('https://api.github.com/repos/javascript-tutorial/en.javascript.info/commits')
.then(response=>response.json())
.then(function(commits){
    console.log(commits[0].author.login,'æ–¹æ³•äºŒç›´æŽ¥fetch')
})

//  ----------
// post
const postFetch = async()=>{
    let user = {
    name:'wyw',
    surname:'wsq'
};
let url = '/article/fetch/post/user';
let response = await fetch(url,{
    method:'post',
    headers:{
        'Content-Type':'application/json;charset=utf-8'
    },
    body:JSON.stringify(user)
});
let result = await response.json();
console.log(result.message,' ðŸ’£post')
};

postFetch();




</script>
</html>